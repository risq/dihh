var Api=function(){function e(){$.ajaxSetup({cache:!1})}function t(){return $.getJSON("/digs")}return{init:e,getDigs:t}}(),App=function(){function e(){var e=document.getElementById("bottom-bar"),n=document.getElementById("button-prev"),r=document.getElementById("button-show"),i=document.getElementById("button-next");cratedigger.init({elements:{rootContainerId:"cratedigger",canvasContainerId:"cratedigger-canvas",loadingContainerId:"cratedigger-loading",infoContainerId:"cratedigger-info",titleContainerId:"cratedigger-record-title",artistContainerId:"cratedigger-record-artist",coverContainerId:"cratedigger-record-cover"},infoPanelOpened:function(){classie.add(e,"closed")},infoPanelClosed:function(){classie.remove(e,"closed")}}),n.addEventListener("click",function(){return cratedigger.selectPrevRecord(),!1},!1),r.addEventListener("click",function(){return cratedigger.flipSelectedRecord(),!1},!1),i.addEventListener("click",function(){return cratedigger.selectNextRecord(),!1},!1),Api.getDigs().done(function(e){cratedigger.loadRecords(t(e),!0)}).fail(function(e){console.log("fail",e)})}function t(e){return $.map(e,function(e){return{title:e.title,artist:e.artists.join(", "),year:e.year,cover:"/uploads/"+e.cover,hasSleeve:!1}})}return{init:e}}();